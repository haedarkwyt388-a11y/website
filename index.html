<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vault</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Poppins,sans-serif;
}

body{
  background:#000;
  color:white;
}

/* HEADER */
.header{
  height:60px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 15px;
  border-bottom:1px solid #222;
}

.header h2{
  font-size:20px;
  background:linear-gradient(90deg,#a855f7,#22d3ee);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.header button{
  background:none;
  border:none;
  color:#ef4444;
  font-size:14px;
  cursor:pointer;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:2px;
}

.item{
  position:relative;
  background:#111;
  aspect-ratio:1/1;
  overflow:hidden;
}

.item img,
.item video{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* LOCK */
.locked{
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
  background:linear-gradient(135deg,#020617,#0f172a);
  cursor:pointer;
}

/* ICONS */
.icons{
  position:absolute;
  bottom:5px;
  right:5px;
  display:flex;
  gap:5px;
}

.icons div{
  background:rgba(0,0,0,.6);
  padding:4px 6px;
  border-radius:6px;
  font-size:14px;
  cursor:pointer;
}

/* ADD BUTTON */
.add{
  position:fixed;
  bottom:20px;
  right:20px;
  width:55px;
  height:55px;
  border-radius:50%;
  background:linear-gradient(135deg,#8b5cf6,#22d3ee);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  color:black;
  cursor:pointer;
  box-shadow:0 0 25px rgba(139,92,246,.8);
}

/* INPUT */
#file{
  display:none;
}
</style>
</head>

<body>

<div class="header">
  <h2>Elyas Vault</h2>
  <button onclick="logout()">Logout</button>
</div>

<div class="grid" id="grid"></div>

<div class="add" onclick="file.click()">+</div>
<input type="file" id="file" accept="image/*,video/*" onchange="addFile()">

<script>
const grid = document.getElementById("grid");
const file = document.getElementById("file");

function load(){
  grid.innerHTML="";
  const data = JSON.parse(localStorage.getItem("vault")) || [];
  data.forEach((item,i)=>{
    const div = document.createElement("div");
    div.className="item";

    if(item.locked){
      div.innerHTML=`<div class="locked" onclick="unlock(${i})">üîí</div>`;
    }else{
      div.innerHTML = item.type.startsWith("video")
        ? `<video src="${item.src}" muted></video>`
        : `<img src="${item.src}">`;
    }

    div.innerHTML += `
      <div class="icons">
        <div onclick="lock(${i})">üîí</div>
        <div onclick="del(${i})">‚ùå</div>
      </div>`;
    grid.appendChild(div);
  });
}

function addFile(){
  const f = file.files[0];
  if(!f) return;

  const reader = new FileReader();
  reader.onload = ()=>{
    const data = JSON.parse(localStorage.getItem("vault")) || [];
    data.push({
      src: reader.result,
      type: f.type,
      locked: false,
      password: null
    });
    localStorage.setItem("vault",JSON.stringify(data));
    load();
  };
  reader.readAsDataURL(f);
}

function lock(i){
  const pwd = prompt("Set password");
  if(!pwd) return;
  const data = JSON.parse(localStorage.getItem("vault"));
  data[i].locked = true;
  data[i].password = pwd;
  localStorage.setItem("vault",JSON.stringify(data));
  load();
}

function unlock(i){
  const pwd = prompt("Enter password");
  const data = JSON.parse(localStorage.getItem("vault"));
  if(pwd !== data[i].password) return alert("Wrong password");
  data[i].locked = false;
  data[i].password = null;
  localStorage.setItem("vault",JSON.stringify(data));
  load();
}

function del(i){
  if(!confirm("Delete this item?")) return;
  const data = JSON.parse(localStorage.getItem("vault"));
  data.splice(i,1);
  localStorage.setItem("vault",JSON.stringify(data));
  load();
}

function logout(){
  window.location.href="index.html";
}

load();
</script>

</body>
</html>
